<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Normalize an Object of Class nmrData — normalize_nmr • pmartR</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Normalize an Object of Class nmrData — normalize_nmr"><meta property="og:description" content="The data is normalized either to a spiked-in metabolite or to a
sample-specific property"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pmartR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.4.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Convenience_Functions.html">Convenience Functions</a>
    </li>
    <li>
      <a href="../articles/Data_Normalization.html">Data Normalization</a>
    </li>
    <li>
      <a href="../articles/Data_Object_Creation.html">Data Object Creation</a>
    </li>
    <li>
      <a href="../articles/Filter_Functionality.html">Filter Functions</a>
    </li>
    <li>
      <a href="../articles/Graphing_with_pmartR.html">Graphing with pmartR</a>
    </li>
    <li>
      <a href="../articles/RNAseq_Processing_Workflow.html">RNAseq Data Processing</a>
    </li>
    <li>
      <a href="../articles/Statistical_Analysis_with_pmartR.html">Statistical Analysis with the `pmartR` Package</a>
    </li>
    <li>
      <a href="../articles/Trelliscope_Vignette.html">Using Trelliscope Functions with pmartR</a>
    </li>
    <li>
      <a href="../articles/Typical_Processing_Workflow.html">Typical Processing Workflow</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/pmartR/pmartR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Normalize an Object of Class nmrData</h1>
    <small class="dont-index">Source: <a href="https://github.com/pmartR/pmartR/blob/HEAD/R/normalize_nmr.R" class="external-link"><code>R/normalize_nmr.R</code></a></small>
    <div class="hidden name"><code>normalize_nmr.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The data is normalized either to a spiked-in metabolite or to a
sample-specific property</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">normalize_nmr</span><span class="op">(</span></span>
<span>  <span class="va">omicsData</span>,</span>
<span>  apply_norm <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  backtransform <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  metabolite_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sample_property_cname <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>omicsData</dt>
<dd><p>an object of the class 'nmrData'</p></dd>


<dt>apply_norm</dt>
<dd><p>logical, indicates whether normalization should be applied
to omicsData$e_data. Defaults to FALSE. If TRUE, the normalization is
applied to the data and an S3 object of the same class as <code>omicsData</code>
(e.g. 'nmrData') with normalized values in <code>e_data</code> is returned. If
FALSE, the normalization is not applied and an S3 object of the class
<code>nmrnormRes</code> is returned, allowing some exploratory data analysis
prior to subsequently applying the normalization.</p></dd>


<dt>backtransform</dt>
<dd><p>logical argument indicating if parameters for back
transforming the data, after normalization, should be calculated. Defaults
to FALSE. If TRUE, the parameters for back transforming the data after
normalization will be calculated, and subsequently included in the data
normalization if <code>apply_norm</code> is TRUE. See details for an explanation 
of how these factors are calculated.</p></dd>


<dt>metabolite_name</dt>
<dd><p>optional character string specifying the name of the
(spiked in) metabolite in <code>e_data</code> to use for instrument normalization
of the nmrData object. These values will be used to divide the raw
abundance of the corresponding sample in e_data (if e_data is log
transformed, this function accounts for that and returns normalized data on
the same scale it was provided). If using this argument, the
'sample_property_cname' argument should not be specified.</p></dd>


<dt>sample_property_cname</dt>
<dd><p>optional character string specifying the name of
the column in f_data containing information to use for instrument
normalization of the nmrData object, such as a concentration. These values
will be used to divide the raw abundance of the corresponding sample in
e_data (if e_data is log transformed, this function accounts for that by
temporarily un-log transforming the data and then returning normalized data
on the same scale it was provided). If using this argument, the
'metabolite_name' argument should not be specified.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>If <code>apply_norm</code> is TRUE, an object of class `nmrData`, normalized
 and with information about the normalization process in `nmr_info`.  Otherwise,
 an object of class `nmrnormRes` is returned, with the same info about
 normalization in attribute `nmr_info` to be passed to plotting and summary functions.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>There are two ways to specify the information needed for
performing instrument normalization on an nmrData object:</p><ol><li><p>specify <code>metabolite_name</code>. This should be used when normalization to a
spiked in standard is desired. Here <code>metabolite_name</code> gives the name of
the metabolite in e_data (and e_meta, if present) corresponding to the spiked
in standard. If any samples have a missing value for this metabolite, an
error is returned.</p></li>
<li><p>specify <code>sample_property_cname</code>. This should be
used when normalizing to a sample property, such as concentration, is
desired. Here, <code>sample_property_cname</code> gives the name of the column in
<code>f_data</code> which contains the property to use for normalization. If any
samples have a missing value for this column, and error is returned.</p></li>
</ol></div>
    <div id="backtransform">
    <h2>Backtransform</h2>
    <p>The purpose of back transforming data is to ensure
values are on a scale similar to their raw values before normalization. The
following values are calculated and/or applied for backtransformation
purposes:</p><table class="table table"><tr><td>If normalization using a metabolite in
<code>e_data</code> is specified</td><td>location parameter is the median of the
values for <code>metabolite_name</code></td></tr><tr><td></td><td></td></tr><tr><td>If normalization using a
sample property in <code>f_data</code> is specified</td><td>location parameter is
the median of the values in <code>sample_property</code></td></tr></table><p>See examples below.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pmartR/pmartRdata" class="external-link">pmartRdata</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Normalize using a metabolite (this is merely an example of how to use this specification;</span></span>
<span><span class="co"># the metabolite used was not actually spiked-in for the purpose of normalization)</span></span>
<span><span class="va">mynmr</span> <span class="op">&lt;-</span> <span class="fu"><a href="edata_transform.html">edata_transform</a></span><span class="op">(</span></span>
<span>  omicsData <span class="op">=</span> <span class="va">nmr_identified_object</span>,</span>
<span>  data_scale <span class="op">=</span> <span class="st">"log2"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">nmr_norm</span> <span class="op">&lt;-</span> <span class="fu">normalize_nmr</span><span class="op">(</span></span>
<span>  omicsData <span class="op">=</span> <span class="va">mynmr</span>, apply_norm <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  metabolite_name <span class="op">=</span> <span class="st">"unkm1.53"</span>,</span>
<span>  backtransform <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Normalization using a sample property</span></span>
<span><span class="va">mynmr</span> <span class="op">&lt;-</span> <span class="fu"><a href="edata_transform.html">edata_transform</a></span><span class="op">(</span></span>
<span>  omicsData <span class="op">=</span> <span class="va">nmr_identified_object</span>,</span>
<span>  data_scale <span class="op">=</span> <span class="st">"log2"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">nmr_norm</span> <span class="op">&lt;-</span> <span class="fu">normalize_nmr</span><span class="op">(</span></span>
<span>  omicsData <span class="op">=</span> <span class="va">mynmr</span>, apply_norm <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  sample_property_cname <span class="op">=</span> <span class="st">"Concentration"</span>,</span>
<span>  backtransform <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Lisa Bramer, Kelly Stratton, Daniel Claborne.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

